# å‰ç«¯é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [ç›®å½•ç»“æ„è¯¦è§£](#ç›®å½•ç»“æ„è¯¦è§£)
3. [æ ¸å¿ƒæ–‡ä»¶è¯´æ˜](#æ ¸å¿ƒæ–‡ä»¶è¯´æ˜)
4. [å¦‚ä½•æ·»åŠ æ–°é¡µé¢](#å¦‚ä½•æ·»åŠ æ–°é¡µé¢)
5. [å¸¸è§å¼€å‘åœºæ™¯](#å¸¸è§å¼€å‘åœºæ™¯)

---

## é¡¹ç›®æ¦‚è¿°

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Vue 3.5.13 + TypeScript 5.7.2
- **æ„å»ºå·¥å…·**: Vite 6.0.3
- **UI ç»„ä»¶åº“**: Naive UI 2.40.3
- **çŠ¶æ€ç®¡ç†**: Pinia 2.3.0
- **è·¯ç”±**: Vue Router 4.5.0 + Elegant Router (æ–‡ä»¶è·¯ç”±ç³»ç»Ÿ)
- **æ ·å¼**: UnoCSS + SCSS
- **å›½é™…åŒ–**: Vue I18n 10.0.5
- **HTTP å®¢æˆ·ç«¯**: Axios + Alova (å¯é€‰)

### é¡¹ç›®ç‰¹ç‚¹

- âœ… **è‡ªåŠ¨åŒ–æ–‡ä»¶è·¯ç”±**: åŸºäºæ–‡ä»¶è·¯å¾„è‡ªåŠ¨ç”Ÿæˆè·¯ç”±
- âœ… **TypeScript ä¸¥æ ¼æ¨¡å¼**: å®Œæ•´çš„ç±»å‹æ”¯æŒ
- âœ… **Monorepo æ¶æ„**: ä½¿ç”¨ pnpm workspace ç®¡ç†å¤šä¸ªåŒ…
- âœ… **åŠ¨æ€è·¯ç”±**: æ”¯æŒåç«¯è¿”å›çš„èœå•å’Œè·¯ç”±é…ç½®
- âœ… **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„æƒé™ç®¡ç† (RBAC)

---

## ç›®å½•ç»“æ„è¯¦è§£

### æ ¹ç›®å½•æ–‡ä»¶

```
web/
â”œâ”€â”€ package.json          # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬é…ç½®
â”œâ”€â”€ vite.config.ts        # Vite æ„å»ºé…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”œâ”€â”€ uno.config.ts         # UnoCSS é…ç½®
â”œâ”€â”€ eslint.config.js      # ESLint ä»£ç è§„èŒƒé…ç½®
â”œâ”€â”€ index.html            # HTML å…¥å£æ–‡ä»¶
â””â”€â”€ pnpm-workspace.yaml   # pnpm workspace é…ç½®
```

### `/src` ç›®å½•ç»“æ„

#### 1. **src/main.ts** - åº”ç”¨å…¥å£

é¡¹ç›®çš„ä¸»å…¥å£æ–‡ä»¶ï¼Œè´Ÿè´£åˆå§‹åŒ–åº”ç”¨ï¼š

```typescript
// ä¸»è¦åŠŸèƒ½ï¼š
// 1. åˆå§‹åŒ–åŠ è½½åŠ¨ç”»
// 2. åˆå§‹åŒ–è¿›åº¦æ¡ (NProgress)
// 3. åˆå§‹åŒ–å›¾æ ‡ç¦»çº¿æ–¹æ¡ˆ
// 4. åˆå§‹åŒ–æ—¥æœŸå¤„ç† (Day.js)
// 5. åˆ›å»º Vue åº”ç”¨å®ä¾‹
// 6. åˆå§‹åŒ–çŠ¶æ€ç®¡ç† (Pinia)
// 7. åˆå§‹åŒ–è·¯ç”± (Vue Router)
// 8. åˆå§‹åŒ–å›½é™…åŒ– (Vue I18n)
// 9. æŒ‚è½½åº”ç”¨
```

#### 2. **src/App.vue** - æ ¹ç»„ä»¶

åº”ç”¨çš„æ ¹ç»„ä»¶ï¼ŒåŒ…å«ï¼š
- Naive UI çš„å…¨å±€é…ç½®
- ä¸»é¢˜é…ç½®
- æ°´å°åŠŸèƒ½
- è·¯ç”±è§†å›¾å®¹å™¨

#### 3. **src/assets/** - é™æ€èµ„æº

```
assets/
â”œâ”€â”€ imgs/          # å›¾ç‰‡èµ„æº
â””â”€â”€ svg-icon/      # SVG å›¾æ ‡æ–‡ä»¶
```

#### 4. **src/components/** - ç»„ä»¶åº“

```
components/
â”œâ”€â”€ advanced/      # é«˜çº§ç»„ä»¶ï¼ˆå¦‚è¡¨æ ¼åˆ—è®¾ç½®ï¼‰
â”œâ”€â”€ common/        # é€šç”¨ç»„ä»¶ï¼ˆå¦‚ logoã€èœå•åˆ‡æ¢å™¨ç­‰ï¼‰
â””â”€â”€ custom/        # è‡ªå®šä¹‰ä¸šåŠ¡ç»„ä»¶
```

**ä¸»è¦ç»„ä»¶**:
- `app-provider.vue`: åº”ç”¨æä¾›è€…ï¼ŒåŒ…å«å…¨å±€é€»è¾‘
- `system-logo.vue`: ç³»ç»Ÿ Logo ç»„ä»¶
- `menu-toggler.vue`: èœå•æŠ˜å /å±•å¼€åˆ‡æ¢
- `theme-schema-switch.vue`: ä¸»é¢˜åˆ‡æ¢ç»„ä»¶
- `svg-icon.vue`: SVG å›¾æ ‡ç»„ä»¶

#### 5. **src/constants/** - å¸¸é‡å®šä¹‰

```
constants/
â”œâ”€â”€ app.ts         # åº”ç”¨çº§å¸¸é‡ï¼ˆå¦‚è·¯ç”±é¦–é¡µã€æƒé™æ¨¡å¼ç­‰ï¼‰
â”œâ”€â”€ business.ts    # ä¸šåŠ¡å¸¸é‡ï¼ˆå¦‚çŠ¶æ€æšä¸¾ã€æ€§åˆ«æšä¸¾ç­‰ï¼‰
â”œâ”€â”€ common.ts      # é€šç”¨å¸¸é‡
â”œâ”€â”€ map-sdk.ts     # åœ°å›¾ SDK é…ç½®
â””â”€â”€ reg.ts         # æ­£åˆ™è¡¨è¾¾å¼
```

#### 6. **src/enum/** - æšä¸¾å®šä¹‰

```
enum/
â””â”€â”€ index.ts       # æšä¸¾å®šä¹‰ï¼ˆå¦‚ Store IDã€è·¯ç”±æ¨¡å¼ç­‰ï¼‰
```

#### 7. **src/hooks/** - ç»„åˆå¼å‡½æ•° (Composables)

```
hooks/
â”œâ”€â”€ business/      # ä¸šåŠ¡ç›¸å…³ hooks
â”‚   â”œâ”€â”€ auth.ts    # è®¤è¯ç›¸å…³
â”‚   â””â”€â”€ captcha.ts # éªŒè¯ç ç›¸å…³
â””â”€â”€ common/        # é€šç”¨ hooks
    â”œâ”€â”€ echarts.ts # ECharts å›¾è¡¨
    â”œâ”€â”€ form.ts    # è¡¨å•å¤„ç†
    â”œâ”€â”€ icon.ts    # å›¾æ ‡å¤„ç†
    â”œâ”€â”€ router.ts  # è·¯ç”±æ“ä½œ
    â”œâ”€â”€ table.ts   # è¡¨æ ¼å¤„ç†
    â””â”€â”€ vchart.ts  # VChart å›¾è¡¨
```

**é‡è¦ hooks**:
- `useTable`: è¡¨æ ¼æ•°æ®ç®¡ç†ï¼ˆåˆ†é¡µã€æœç´¢ã€æ’åºç­‰ï¼‰
- `useRouterPush`: è·¯ç”±è·³è½¬å·¥å…·
- `useForm`: è¡¨å•éªŒè¯å’Œç®¡ç†

#### 8. **src/layouts/** - å¸ƒå±€ç»„ä»¶

```
layouts/
â”œâ”€â”€ base-layout/   # åŸºç¡€å¸ƒå±€ï¼ˆå¸¦ä¾§è¾¹æ ã€å¤´éƒ¨ï¼‰
â”œâ”€â”€ blank-layout/  # ç©ºç™½å¸ƒå±€ï¼ˆç™»å½•é¡µç­‰ï¼‰
â”œâ”€â”€ context/       # å¸ƒå±€ä¸Šä¸‹æ–‡
â””â”€â”€ modules/       # å¸ƒå±€æ¨¡å—
    â”œâ”€â”€ global-header/     # å…¨å±€å¤´éƒ¨
    â”œâ”€â”€ global-menu/       # å…¨å±€èœå•
    â”œâ”€â”€ global-sider/      # å…¨å±€ä¾§è¾¹æ 
    â”œâ”€â”€ global-tab/        # å…¨å±€æ ‡ç­¾é¡µ
    â”œâ”€â”€ global-breadcrumb/ # å…¨å±€é¢åŒ…å±‘
    â””â”€â”€ theme-drawer/       # ä¸»é¢˜é…ç½®æŠ½å±‰
```

#### 9. **src/locales/** - å›½é™…åŒ–

```
locales/
â”œâ”€â”€ index.ts       # i18n åˆå§‹åŒ–
â”œâ”€â”€ locale.ts       # è¯­è¨€é…ç½®
â”œâ”€â”€ naive.ts        # Naive UI è¯­è¨€åŒ…
â”œâ”€â”€ dayjs.ts        # Day.js è¯­è¨€é…ç½®
â””â”€â”€ langs/          # è¯­è¨€æ–‡ä»¶
    â”œâ”€â”€ zh-cn.ts    # ä¸­æ–‡
    â””â”€â”€ en-us.ts    # è‹±æ–‡
```

**ä½¿ç”¨æ–¹å¼**:
```typescript
import { $t } from '@/locales';

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
$t('common.add')  // "æ–°å¢"
$t('route.home')  // "é¦–é¡µ"
```

#### 10. **src/plugins/** - æ’ä»¶é…ç½®

```
plugins/
â”œâ”€â”€ index.ts        # æ’ä»¶å¯¼å‡º
â”œâ”€â”€ app.ts          # åº”ç”¨æ’ä»¶
â”œâ”€â”€ assets.ts       # èµ„æºæ’ä»¶ï¼ˆSVG å›¾æ ‡ç­‰ï¼‰
â”œâ”€â”€ dayjs.ts        # Day.js æ’ä»¶
â”œâ”€â”€ iconify.ts      # Iconify å›¾æ ‡æ’ä»¶
â”œâ”€â”€ loading.ts      # åŠ è½½åŠ¨ç”»æ’ä»¶
â””â”€â”€ nprogress.ts    # è¿›åº¦æ¡æ’ä»¶
```

#### 11. **src/router/** - è·¯ç”±é…ç½®

```
router/
â”œâ”€â”€ index.ts        # è·¯ç”±å®ä¾‹åˆ›å»º
â”œâ”€â”€ elegant/        # Elegant Router (æ–‡ä»¶è·¯ç”±ç³»ç»Ÿ)
â”‚   â”œâ”€â”€ routes.ts   # è‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ imports.ts  # è‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±å¯¼å…¥
â”‚   â””â”€â”€ transform.ts # è·¯ç”±è½¬æ¢å·¥å…·
â”œâ”€â”€ guard/          # è·¯ç”±å®ˆå«
â”‚   â”œâ”€â”€ index.ts    # å®ˆå«å…¥å£
â”‚   â”œâ”€â”€ progress.ts # è¿›åº¦æ¡å®ˆå«
â”‚   â”œâ”€â”€ route.ts    # è·¯ç”±æƒé™å®ˆå«
â”‚   â””â”€â”€ title.ts    # é¡µé¢æ ‡é¢˜å®ˆå«
â””â”€â”€ routes/         # è·¯ç”±é…ç½®
    â”œâ”€â”€ index.ts    # è·¯ç”±é…ç½®å…¥å£
    â””â”€â”€ builtin.ts  # å†…ç½®è·¯ç”±é…ç½®
```

**è·¯ç”±æ¨¡å¼**:
- **é™æ€è·¯ç”±æ¨¡å¼**: å‰ç«¯æ–‡ä»¶è·¯ç”±ï¼Œè‡ªåŠ¨ç”Ÿæˆ
- **åŠ¨æ€è·¯ç”±æ¨¡å¼**: åç«¯è¿”å›èœå•é…ç½®ï¼ŒåŠ¨æ€æ³¨å†Œè·¯ç”±

#### 12. **src/service/** - API æœåŠ¡

```
service/
â”œâ”€â”€ api/            # API æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ index.ts    # API å¯¼å‡º
â”‚   â”œâ”€â”€ auth.ts     # è®¤è¯ç›¸å…³ API
â”‚   â”œâ”€â”€ route.ts    # è·¯ç”±ç›¸å…³ API
â”‚   â””â”€â”€ system-manage.ts # ç³»ç»Ÿç®¡ç† API
â””â”€â”€ request/        # HTTP è¯·æ±‚å°è£…
    â”œâ”€â”€ index.ts    # è¯·æ±‚å®ä¾‹
    â”œâ”€â”€ shared.ts   # å…±äº«é…ç½®
    â””â”€â”€ type.ts     # è¯·æ±‚ç±»å‹å®šä¹‰
```

**API è°ƒç”¨ç¤ºä¾‹**:
```typescript
import { fetchGetUserList } from '@/service/api';

// è°ƒç”¨ API
const { data, error } = await fetchGetUserList({
  current: 1,
  size: 10,
  userName: 'admin'
});
```

#### 13. **src/store/** - çŠ¶æ€ç®¡ç† (Pinia)

```
store/
â”œâ”€â”€ index.ts        # Store å…¥å£
â”œâ”€â”€ modules/        # Store æ¨¡å—
â”‚   â”œâ”€â”€ app/        # åº”ç”¨çŠ¶æ€ï¼ˆè¯­è¨€ã€ä¸»é¢˜ç­‰ï¼‰
â”‚   â”œâ”€â”€ auth/       # è®¤è¯çŠ¶æ€ï¼ˆç”¨æˆ·ä¿¡æ¯ã€tokenï¼‰
â”‚   â”œâ”€â”€ route/      # è·¯ç”±çŠ¶æ€ï¼ˆèœå•ã€è·¯ç”±åˆ—è¡¨ï¼‰
â”‚   â”œâ”€â”€ tab/        # æ ‡ç­¾é¡µçŠ¶æ€
â”‚   â””â”€â”€ theme/      # ä¸»é¢˜çŠ¶æ€
â””â”€â”€ plugins/        # Store æ’ä»¶
```

**Store ä½¿ç”¨ç¤ºä¾‹**:
```typescript
import { useAuthStore } from '@/store/modules/auth';
import { useRouteStore } from '@/store/modules/route';

const authStore = useAuthStore();
const routeStore = useRouteStore();

// è·å–ç”¨æˆ·ä¿¡æ¯
const userInfo = authStore.userInfo;

// è·å–èœå•åˆ—è¡¨
const menus = routeStore.menus;
```

#### 14. **src/styles/** - æ ·å¼æ–‡ä»¶

```
styles/
â”œâ”€â”€ css/            # CSS æ–‡ä»¶
â”‚   â”œâ”€â”€ global.css  # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ reset.css   # æ ·å¼é‡ç½®
â”‚   â”œâ”€â”€ nprogress.css # è¿›åº¦æ¡æ ·å¼
â”‚   â””â”€â”€ transition.css # è¿‡æ¸¡åŠ¨ç”»
â””â”€â”€ scss/           # SCSS æ–‡ä»¶
    â”œâ”€â”€ global.scss # å…¨å±€ SCSS
    â””â”€â”€ scrollbar.scss # æ»šåŠ¨æ¡æ ·å¼
```

#### 15. **src/theme/** - ä¸»é¢˜é…ç½®

```
theme/
â”œâ”€â”€ settings.ts     # ä¸»é¢˜è®¾ç½®
â””â”€â”€ vars.ts         # ä¸»é¢˜å˜é‡
```

#### 16. **src/typings/** - TypeScript ç±»å‹å®šä¹‰

```
typings/
â”œâ”€â”€ api.d.ts        # API ç±»å‹å®šä¹‰
â”œâ”€â”€ app.d.ts        # åº”ç”¨ç±»å‹å®šä¹‰
â”œâ”€â”€ router.d.ts     # è·¯ç”±ç±»å‹å®šä¹‰
â”œâ”€â”€ storage.d.ts    # å­˜å‚¨ç±»å‹å®šä¹‰
â””â”€â”€ ...             # å…¶ä»–ç±»å‹å®šä¹‰
```

#### 17. **src/utils/** - å·¥å…·å‡½æ•°

```
utils/
â”œâ”€â”€ agent.ts        # User-Agent æ£€æµ‹
â”œâ”€â”€ common.ts       # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ icon.ts         # å›¾æ ‡å·¥å…·
â”œâ”€â”€ other.ts        # å…¶ä»–å·¥å…·
â”œâ”€â”€ service.ts      # æœåŠ¡å·¥å…·
â””â”€â”€ storage.ts      # å­˜å‚¨å·¥å…·
```

#### 18. **src/views/** - é¡µé¢ç»„ä»¶

```
views/
â”œâ”€â”€ _builtin/       # å†…ç½®é¡µé¢ï¼ˆç™»å½•ã€404ã€500 ç­‰ï¼‰
â”œâ”€â”€ home/           # é¦–é¡µ
â”œâ”€â”€ manage/         # ç³»ç»Ÿç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ user/       # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ role/       # è§’è‰²ç®¡ç†
â”‚   â”œâ”€â”€ menu/       # èœå•ç®¡ç†
â”‚   â””â”€â”€ ...
â”œâ”€â”€ function/       # åŠŸèƒ½ç¤ºä¾‹é¡µé¢
â”œâ”€â”€ plugin/         # æ’ä»¶ç¤ºä¾‹é¡µé¢
â””â”€â”€ ...
```

**é¡µé¢å‘½åè§„åˆ™**:
- æ–‡ä»¶è·¯å¾„å¯¹åº”è·¯ç”±è·¯å¾„
- ä¾‹å¦‚: `views/manage/user/index.vue` â†’ `/manage/user`

### `/build` ç›®å½• - æ„å»ºé…ç½®

```
build/
â”œâ”€â”€ config/         # æ„å»ºé…ç½®
â”‚   â”œâ”€â”€ index.ts    # ä¸»é…ç½®
â”‚   â”œâ”€â”€ proxy.ts    # ä»£ç†é…ç½®
â”‚   â””â”€â”€ time.ts     # æ—¶é—´å·¥å…·
â””â”€â”€ plugins/        # Vite æ’ä»¶
    â”œâ”€â”€ index.ts    # æ’ä»¶å…¥å£
    â”œâ”€â”€ html.ts     # HTML æ’ä»¶
    â”œâ”€â”€ router.ts   # è·¯ç”±æ’ä»¶
    â”œâ”€â”€ unocss.ts   # UnoCSS æ’ä»¶
    â””â”€â”€ unplugin.ts # é€šç”¨æ’ä»¶
```

### `/packages` ç›®å½• - Monorepo åŒ…

```
packages/
â”œâ”€â”€ alova/          # Alova HTTP å®¢æˆ·ç«¯å°è£…
â”œâ”€â”€ axios/          # Axios HTTP å®¢æˆ·ç«¯å°è£…
â”œâ”€â”€ hooks/          # é€šç”¨ hooks åŒ…
â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°åŒ…
â”œâ”€â”€ materials/      # ææ–™ç»„ä»¶åŒ…
â”œâ”€â”€ scripts/        # å‘½ä»¤è¡Œå·¥å…·åŒ…
â””â”€â”€ ...
```

---

## æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### 1. è·¯ç”±ç³»ç»Ÿ

#### æ–‡ä»¶è·¯ç”±è‡ªåŠ¨ç”Ÿæˆ

é¡¹ç›®ä½¿ç”¨ **Elegant Router** å®ç°æ–‡ä»¶è·¯ç”±ç³»ç»Ÿï¼š

- **è·¯ç”±æ–‡ä»¶ä½ç½®**: `src/views/`
- **è·¯ç”±è‡ªåŠ¨ç”Ÿæˆ**: æ ¹æ®æ–‡ä»¶è·¯å¾„è‡ªåŠ¨ç”Ÿæˆè·¯ç”±é…ç½®
- **è·¯ç”±é…ç½®**: `src/router/elegant/routes.ts` (è‡ªåŠ¨ç”Ÿæˆï¼Œä¸è¦æ‰‹åŠ¨ä¿®æ”¹)

**è·¯ç”±å‘½åè§„åˆ™**:
```
views/
â”œâ”€â”€ home/index.vue                    â†’ route: 'home'
â”œâ”€â”€ manage/user/index.vue             â†’ route: 'manage_user'
â””â”€â”€ manage/user-detail/[id].vue       â†’ route: 'manage_user-detail'
```

#### è·¯ç”±ç±»å‹

1. **å¸¸é‡è·¯ç”±** (`constant: true`): ä¸éœ€è¦ç™»å½•å³å¯è®¿é—®ï¼ˆå¦‚ç™»å½•é¡µã€404 é¡µï¼‰
2. **è®¤è¯è·¯ç”±**: éœ€è¦ç™»å½•åè®¿é—®
3. **åŠ¨æ€è·¯ç”±**: ä»åç«¯è·å–çš„èœå•é…ç½®

### 2. API æœåŠ¡å±‚

#### API å®šä¹‰ä½ç½®

`src/service/api/` - æ‰€æœ‰ API æ¥å£å®šä¹‰

#### API è°ƒç”¨æ–¹å¼

```typescript
// 1. å®šä¹‰ API (src/service/api/system-manage.ts)
export function fetchGetUserList(data?: Api.SystemManage.UserSearchParams) {
  return request<Api.SystemManage.UserList>({
    url: '/system-manage/users/all/',
    method: 'post',
    data
  });
}

// 2. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
import { fetchGetUserList } from '@/service/api';

const { data, error } = await fetchGetUserList({
  current: 1,
  size: 10
});
```

### 3. çŠ¶æ€ç®¡ç†

#### Store æ¨¡å—

- **app**: åº”ç”¨é…ç½®ï¼ˆè¯­è¨€ã€ä¸»é¢˜ç­‰ï¼‰
- **auth**: è®¤è¯ä¿¡æ¯ï¼ˆç”¨æˆ·ã€tokenã€è§’è‰²ç­‰ï¼‰
- **route**: è·¯ç”±å’Œèœå•
- **tab**: æ ‡ç­¾é¡µç®¡ç†
- **theme**: ä¸»é¢˜é…ç½®

#### Store ä½¿ç”¨

```typescript
import { useAuthStore } from '@/store/modules/auth';

const authStore = useAuthStore();

// è·å–çŠ¶æ€
const userInfo = authStore.userInfo;
const isLogin = authStore.isLogin;

// è°ƒç”¨æ–¹æ³•
await authStore.login(credentials);
await authStore.logout();
```

### 4. ç±»å‹å®šä¹‰

æ‰€æœ‰ç±»å‹å®šä¹‰åœ¨ `src/typings/` ç›®å½•ä¸‹ï¼š

- `api.d.ts`: API è¯·æ±‚å’Œå“åº”ç±»å‹
- `router.d.ts`: è·¯ç”±ç›¸å…³ç±»å‹
- `app.d.ts`: åº”ç”¨å…¨å±€ç±»å‹

---

## å¦‚ä½•æ·»åŠ æ–°é¡µé¢

### æ­¥éª¤ 1: åˆ›å»ºé¡µé¢æ–‡ä»¶

åœ¨ `src/views/` ç›®å½•ä¸‹åˆ›å»ºé¡µé¢æ–‡ä»¶ï¼š

```
src/views/
â””â”€â”€ example/              # ç¤ºä¾‹æ¨¡å—
    â””â”€â”€ index.vue         # ç¤ºä¾‹é¡µé¢
```

**ç¤ºä¾‹é¡µé¢ç»“æ„** (`src/views/example/index.vue`):

```vue
<script setup lang="ts">
import { ref } from 'vue';
import { $t } from '@/locales';

// é¡µé¢æ ‡é¢˜
defineOptions({
  name: 'Example'
});

// é¡µé¢æ•°æ®
const data = ref([]);

// åŠ è½½æ•°æ®
async function loadData() {
  // TODO: è°ƒç”¨ API
}
</script>

<template>
  <div class="flex-col gap-16px p-16px">
    <NCard :bordered="false" title="ç¤ºä¾‹é¡µé¢">
      <template #header-extra>
        <NButton type="primary">{{ $t('common.add') }}</NButton>
      </template>
      
      <div>
        <!-- é¡µé¢å†…å®¹ -->
      </div>
    </NCard>
  </div>
</template>

<style scoped></style>
```

### æ­¥éª¤ 2: æ·»åŠ è·¯ç”±é…ç½®ï¼ˆé™æ€è·¯ç”±æ¨¡å¼ï¼‰

å¦‚æœä½¿ç”¨**é™æ€è·¯ç”±æ¨¡å¼**ï¼Œè·¯ç”±ä¼šè‡ªåŠ¨æ ¹æ®æ–‡ä»¶è·¯å¾„ç”Ÿæˆã€‚

**è·¯ç”±è·¯å¾„è§„åˆ™**:
- `views/example/index.vue` â†’ `/example`
- `views/example/list/index.vue` â†’ `/example/list`
- `views/example/detail/[id].vue` â†’ `/example/detail/:id`

**ç”Ÿæˆè·¯ç”±åï¼Œéœ€è¦åœ¨ `src/router/routes/index.ts` ä¸­æ·»åŠ è‡ªå®šä¹‰è·¯ç”±é…ç½®**ï¼ˆå¦‚æœéœ€è¦èœå•æ˜¾ç¤ºï¼‰:

```typescript
const customRoutes: CustomRoute[] = [
  {
    name: 'example',
    path: '/example',
    component: 'layout.base$view.example',
    meta: {
      title: 'example',
      i18nKey: 'route.example',
      icon: 'mdi:example',
      order: 10
    }
  }
];
```

### æ­¥éª¤ 3: æ·»åŠ å›½é™…åŒ–æ–‡æœ¬

åœ¨ `src/locales/langs/zh-cn.ts` ä¸­æ·»åŠ ï¼š

```typescript
const local: App.I18n.Schema = {
  route: {
    example: 'ç¤ºä¾‹é¡µé¢',
    // ...
  },
  // ...
};
```

### æ­¥éª¤ 4: æ·»åŠ  API æ¥å£ï¼ˆå¦‚éœ€è¦ï¼‰

åœ¨ `src/service/api/` ä¸‹åˆ›å»ºæˆ–æ·»åŠ  APIï¼š

```typescript
// src/service/api/example.ts
import { request } from '../request';

export function fetchGetExampleList(params?: Api.Example.SearchParams) {
  return request<Api.Example.List>({
    url: '/example/list',
    method: 'get',
    params
  });
}
```

åœ¨ `src/service/api/index.ts` ä¸­å¯¼å‡ºï¼š

```typescript
export * from './example';
```

### æ­¥éª¤ 5: æ·»åŠ ç±»å‹å®šä¹‰ï¼ˆå¦‚éœ€è¦ï¼‰

åœ¨ `src/typings/api.d.ts` ä¸­æ·»åŠ ï¼š

```typescript
declare namespace Api {
  namespace Example {
    interface SearchParams {
      current?: number;
      size?: number;
      keyword?: string;
    }
    
    interface List {
      total: number;
      list: Item[];
    }
    
    interface Item {
      id: number;
      name: string;
      // ...
    }
  }
}
```

### æ­¥éª¤ 6: è¿è¡Œè·¯ç”±ç”Ÿæˆå‘½ä»¤

```bash
pnpm gen-route
```

è¿™ä¸ªå‘½ä»¤ä¼šï¼š
- æ‰«æ `src/views/` ç›®å½•
- è‡ªåŠ¨ç”Ÿæˆè·¯ç”±é…ç½®
- æ›´æ–° `src/router/elegant/routes.ts` å’Œ `imports.ts`

### æ­¥éª¤ 7: åç«¯é…ç½®èœå•ï¼ˆåŠ¨æ€è·¯ç”±æ¨¡å¼ï¼‰

å¦‚æœä½¿ç”¨**åŠ¨æ€è·¯ç”±æ¨¡å¼**ï¼Œéœ€è¦åœ¨åç«¯æ·»åŠ èœå•é…ç½®ï¼š

1. åœ¨æ•°æ®åº“ä¸­æ·»åŠ èœå•è®°å½•
2. é…ç½®èœå•çš„ `route_name`ã€`route_path`ã€`component` ç­‰
3. å‰ç«¯ä¼šè‡ªåŠ¨ä»åç«¯è·å–èœå•å¹¶æ³¨å†Œè·¯ç”±

---

## å®Œæ•´ç¤ºä¾‹ï¼šæ·»åŠ ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨é¡µé¢

### 1. åˆ›å»ºé¡µé¢æ–‡ä»¶

`src/views/user/list/index.vue`:

```vue
<script setup lang="tsx">
import { NButton, NCard, NDataTable, NTag } from 'naive-ui';
import { fetchGetUserList } from '@/service/api';
import { $t } from '@/locales';
import { useTable } from '@/hooks/common/table';

defineOptions({
  name: 'UserList'
});

const {
  columns,
  data,
  loading,
  getData,
  pagination,
  searchParams,
  resetSearchParams
} = useTable({
  apiFn: fetchGetUserList,
  columns: () => [
    {
      key: 'index',
      title: $t('common.index'),
      align: 'center',
      width: 64
    },
    {
      key: 'userName',
      title: 'ç”¨æˆ·å',
      align: 'center'
    },
    {
      key: 'nickName',
      title: 'æ˜µç§°',
      align: 'center'
    },
    {
      key: 'userEmail',
      title: 'é‚®ç®±',
      align: 'center'
    },
    {
      key: 'action',
      title: $t('common.action'),
      align: 'center',
      width: 150,
      render: (row: Api.SystemManage.User) => (
        <div class="flex justify-center gap-8px">
          <NButton size="small" onClick={() => handleEdit(row)}>
            {$t('common.edit')}
          </NButton>
          <NButton size="small" type="error" onClick={() => handleDelete(row)}>
            {$t('common.delete')}
          </NButton>
        </div>
      )
    }
  ],
  apiParams: {
    current: 1,
    size: 10,
    userName: null
  }
});

function handleEdit(row: Api.SystemManage.User) {
  // ç¼–è¾‘é€»è¾‘
}

function handleDelete(row: Api.SystemManage.User) {
  // åˆ é™¤é€»è¾‘
}
</script>

<template>
  <div class="flex-col gap-16px p-16px">
    <NCard :bordered="false" title="ç”¨æˆ·åˆ—è¡¨">
      <template #header-extra>
        <NButton type="primary">{{ $t('common.add') }}</NButton>
      </template>
      
      <NDataTable
        :columns="columns"
        :data="data"
        :loading="loading"
        :pagination="pagination"
        @update:page="getData"
      />
    </NCard>
  </div>
</template>
```

### 2. æ·»åŠ è·¯ç”±é…ç½®

è·¯ç”±ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œè·¯å¾„ä¸º `/user/list`

### 3. æ·»åŠ å›½é™…åŒ–

`src/locales/langs/zh-cn.ts`:

```typescript
route: {
  user_list: 'ç”¨æˆ·åˆ—è¡¨',
  // ...
}
```

### 4. è¿è¡Œå‘½ä»¤

```bash
pnpm gen-route
```

---

## å¸¸è§å¼€å‘åœºæ™¯

### åœºæ™¯ 1: æ·»åŠ å¸¦æœç´¢çš„è¡¨å•é¡µé¢

å‚è€ƒ `src/views/manage/user/index.vue`ï¼Œä½¿ç”¨ `useTable` hookï¼š

```typescript
const {
  columns,
  data,
  loading,
  getData,
  searchParams,
  resetSearchParams
} = useTable({
  apiFn: fetchGetUserList,
  apiParams: {
    current: 1,
    size: 10,
    userName: null,  // æœç´¢å‚æ•°
    statusType: null
  }
});
```

### åœºæ™¯ 2: æ·»åŠ å¸¦æƒé™æ§åˆ¶çš„é¡µé¢

åœ¨è·¯ç”± meta ä¸­æ·»åŠ  `roles`:

```typescript
{
  name: 'example',
  path: '/example',
  component: 'layout.base$view.example',
  meta: {
    title: 'example',
    roles: ['R_ADMIN', 'R_SUPER']  // æƒé™è§’è‰²
  }
}
```

### åœºæ™¯ 3: æ·»åŠ éšè—èœå•çš„é¡µé¢ï¼ˆè¯¦æƒ…é¡µï¼‰

```typescript
{
  name: 'user_detail',
  path: '/user/detail/:id',
  component: 'view.user_detail',
  meta: {
    title: 'user_detail',
    hideInMenu: true,  // éšè—èœå•
    activeMenu: 'user_list'  // æ¿€æ´»çš„çˆ¶èœå•
  }
}
```

### åœºæ™¯ 4: æ·»åŠ å¤šæ ‡ç­¾é¡µé¡µé¢

```typescript
{
  name: 'example',
  meta: {
    multiTab: true,  // æ”¯æŒå¤šæ ‡ç­¾é¡µ
    keepAlive: true  // ç¼“å­˜é¡µé¢
  }
}
```

### åœºæ™¯ 5: ä½¿ç”¨ Alova è¿›è¡Œ API è°ƒç”¨

é¡¹ç›®æ”¯æŒä¸¤ç§ HTTP å®¢æˆ·ç«¯ï¼š

1. **Axios** (é»˜è®¤): `src/service/api/`
2. **Alova** (å¯é€‰): `src/service-alova/api/`

ä½¿ç”¨ Alova:

```typescript
import { fetchGetUserList } from '@/service-alova/api';

const { data, loading, error } = useRequest(fetchGetUserList);
```

---

## å¼€å‘è§„èŒƒ

### 1. æ–‡ä»¶å‘½å

- **ç»„ä»¶æ–‡ä»¶**: PascalCase (`UserList.vue`)
- **å·¥å…·æ–‡ä»¶**: kebab-case (`user-utils.ts`)
- **é¡µé¢æ–‡ä»¶**: å°å†™ (`index.vue`)

### 2. ä»£ç é£æ ¼

- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ª ESLint è§„åˆ™
- ä½¿ç”¨ç»„åˆå¼ API (`<script setup>`)
- ä½¿ç”¨ Naive UI ç»„ä»¶åº“

### 3. è·¯ç”±è§„èŒƒ

- ä½¿ç”¨æ–‡ä»¶è·¯ç”±ç³»ç»Ÿ
- è·¯ç”±åç§°ä½¿ç”¨ä¸‹åˆ’çº¿å‘½å (`user_list`)
- è·¯ç”±è·¯å¾„ä½¿ç”¨ä¸­åˆ’çº¿ (`/user/list`)

### 4. ç»„ä»¶è§„èŒƒ

- ä½¿ç”¨ `<script setup lang="ts">` æˆ– `<script setup lang="tsx">`
- ä½¿ç”¨ `defineOptions` å®šä¹‰ç»„ä»¶åç§°
- Props ä½¿ç”¨ `defineProps` å®šä¹‰
- Emits ä½¿ç”¨ `defineEmits` å®šä¹‰

---

## ç›¸å…³å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# ç”Ÿæˆè·¯ç”±
pnpm gen-route

# ä»£ç æ£€æŸ¥
pnpm lint

# ç±»å‹æ£€æŸ¥
pnpm typecheck

# Git æäº¤ï¼ˆè§„èŒƒæäº¤ï¼‰
pnpm commit
```

---

## æ³¨æ„äº‹é¡¹

1. **è·¯ç”±ç”Ÿæˆ**: ä¿®æ”¹é¡µé¢æ–‡ä»¶åï¼Œéœ€è¦è¿è¡Œ `pnpm gen-route` é‡æ–°ç”Ÿæˆè·¯ç”±
2. **ç±»å‹å®šä¹‰**: API ç±»å‹éœ€è¦åœ¨ `src/typings/api.d.ts` ä¸­å®šä¹‰
3. **å›½é™…åŒ–**: æ‰€æœ‰æ–‡æœ¬éƒ½åº”è¯¥ä½¿ç”¨ `$t()` å‡½æ•°ï¼Œæ”¯æŒå›½é™…åŒ–
4. **æƒé™æ§åˆ¶**: é¡µé¢æƒé™é€šè¿‡è·¯ç”± meta çš„ `roles` å­—æ®µæ§åˆ¶
5. **èœå•é…ç½®**: åŠ¨æ€è·¯ç”±æ¨¡å¼ä¸‹ï¼Œèœå•ç”±åç«¯è¿”å›ï¼›é™æ€è·¯ç”±æ¨¡å¼ä¸‹ï¼Œåœ¨ `customRoutes` ä¸­é…ç½®

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-11-06

