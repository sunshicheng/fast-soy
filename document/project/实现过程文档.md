# æµ‹è¯•Agentå·¥å…·å¹³å°å®ç°è¿‡ç¨‹æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
- **åˆ›å»ºæ—¥æœŸ**: 2025-11-06
- **æ–‡æ¡£ç±»å‹**: å®ç°è¿‡ç¨‹æ–‡æ¡£
- **é¡¹ç›®åç§°**: æµ‹è¯•Agentå·¥å…·å¹³å°

---

## å®ç°é˜¶æ®µåˆ’åˆ†

### ç¬¬ä¸€é˜¶æ®µï¼šå‰åç«¯åŸºç¡€é…ç½®ï¼ˆå½“å‰é˜¶æ®µï¼‰

**ç›®æ ‡**: æ­å»ºAgentç®¡ç†çš„åŸºç¡€æ¡†æ¶ï¼Œå®ç°åŸºæœ¬çš„CRUDåŠŸèƒ½

**ä»»åŠ¡æ¸…å•**:
- [x] åç«¯Agentæ¨¡å‹å®šä¹‰
- [x] åç«¯Agent Schemaå®šä¹‰
- [x] åç«¯Agent Controllerå®ç°
- [x] åç«¯Agent APIè·¯ç”±å®ç°
- [x] åç«¯è·¯ç”±æ³¨å†Œ
- [x] å‰ç«¯Agent APIæ¥å£å®šä¹‰
- [x] å‰ç«¯Agentç±»å‹å®šä¹‰
- [x] å‰ç«¯Agentåˆ—è¡¨é¡µé¢ï¼ˆåŸºç¡€ï¼‰

**é¢„è®¡æ—¶é—´**: 1-2å°æ—¶

**å®ŒæˆçŠ¶æ€**: âœ… å·²å®Œæˆ

**å·²åˆ›å»ºçš„æ–‡ä»¶**:
- `app/models/system/agent.py` - Agentæ¨¡å‹ï¼ˆå·²å®Œå–„ï¼‰
- `app/schemas/agents.py` - Agent Schemaå®šä¹‰
- `app/controllers/agent.py` - Agentä¸šåŠ¡é€»è¾‘æ§åˆ¶å™¨
- `app/api/v1/system_manage/agents.py` - Agent APIè·¯ç”±
- `web/src/service/api/agent.ts` - å‰ç«¯Agent APIæ¥å£
- `web/src/views/agent/index.vue` - Agentåˆ—è¡¨é¡µé¢

**å·²ä¿®æ”¹çš„æ–‡ä»¶**:
- `app/models/system/utils.py` - æ·»åŠ Agentç›¸å…³æ—¥å¿—ç±»å‹
- `app/api/v1/system_manage/__init__.py` - æ³¨å†ŒAgentè·¯ç”±
- `web/src/service/api/index.ts` - å¯¼å‡ºAgent API
- `web/src/typings/api.d.ts` - æ·»åŠ Agentç±»å‹å®šä¹‰

---

### ç¬¬äºŒé˜¶æ®µï¼šå…³é”®ä¸šåŠ¡åœºæ™¯é…ç½®

**ç›®æ ‡**: å®ç°Agentçš„æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½

**ä»»åŠ¡æ¸…å•**:
- [ ] Agentç±»å‹å®šä¹‰ï¼ˆä¸šåŠ¡åœºæ™¯ç±»ã€åŠŸèƒ½ç±»ï¼‰
- [ ] Agentèƒ½åŠ›é…ç½®
- [ ] Agentå‚æ•°é…ç½®
- [ ] Agentä¾èµ–å…³ç³»é…ç½®
- [ ] æµç¨‹é…ç½®åŸºç¡€æ¨¡å‹
- [ ] æ‰§è¡Œè®¡åˆ’åŸºç¡€æ¨¡å‹

**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶

---

### ç¬¬ä¸‰é˜¶æ®µï¼šæµç¨‹è·‘é€š

**ç›®æ ‡**: å®ç°ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•æµç¨‹ï¼Œä»é…ç½®åˆ°æ‰§è¡Œ

**ä»»åŠ¡æ¸…å•**:
- [ ] ä¸»æ§AgentåŸºç¡€å®ç°
- [ ] å­Agentæ‰§è¡Œæ¡†æ¶
- [ ] æ‰§è¡Œå¼•æ“åŸºç¡€å®ç°
- [ ] ç®€å•çš„æµç¨‹å¯è§†åŒ–
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•

**é¢„è®¡æ—¶é—´**: 3-4å°æ—¶

---

## ç¬¬ä¸€é˜¶æ®µè¯¦ç»†å®ç°æ­¥éª¤

### æ­¥éª¤1: åç«¯Agentæ¨¡å‹å®Œå–„

**æ–‡ä»¶**: `app/models/system/agent.py`

**éœ€è¦å®Œå–„çš„å†…å®¹**:
- AgentåŸºæœ¬ä¿¡æ¯å­—æ®µï¼ˆåç§°ã€ç±»å‹ã€æè¿°ç­‰ï¼‰
- AgentçŠ¶æ€ç®¡ç†
- Agentç‰ˆæœ¬ç®¡ç†ï¼ˆå¯é€‰ï¼Œåç»­æ·»åŠ ï¼‰

**å½“å‰çŠ¶æ€**: å·²æœ‰åŸºç¡€æ¨¡å‹ï¼Œéœ€è¦æ ¹æ®éœ€æ±‚è§„åˆ’å®Œå–„

---

### æ­¥éª¤2: åç«¯Agent Schemaå®šä¹‰

**æ–‡ä»¶**: `app/schemas/agents.py`

**éœ€è¦å®šä¹‰çš„Schema**:
- `AgentBase`: åŸºç¡€å­—æ®µ
- `AgentSearch`: æœç´¢å‚æ•°
- `AgentCreate`: åˆ›å»ºè¯·æ±‚
- `AgentUpdate`: æ›´æ–°è¯·æ±‚

**å‚è€ƒ**: `app/schemas/users.py`

---

### æ­¥éª¤3: åç«¯Agent Controllerå®ç°

**æ–‡ä»¶**: `app/controllers/agent.py`

**éœ€è¦å®ç°çš„æ–¹æ³•**:
- ç»§æ‰¿ `CRUDBase` æä¾›åŸºç¡€CRUD
- è‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•ï¼ˆå¦‚æŒ‰ç±»å‹æŸ¥è¯¢ã€æŒ‰çŠ¶æ€æŸ¥è¯¢ï¼‰

**å‚è€ƒ**: `app/controllers/user.py`

---

### æ­¥éª¤4: åç«¯Agent APIè·¯ç”±å®ç°

**æ–‡ä»¶**: `app/api/v1/system_manage/agents.py`

**éœ€è¦å®ç°çš„æ¥å£**:
- `POST /agents/all/`: è·å–Agentåˆ—è¡¨ï¼ˆæ”¯æŒæœç´¢å’Œåˆ†é¡µï¼‰
- `GET /agents/{agent_id}`: è·å–Agentè¯¦æƒ…
- `POST /agents`: åˆ›å»ºAgent
- `PATCH /agents/{agent_id}`: æ›´æ–°Agent
- `DELETE /agents/{agent_id}`: åˆ é™¤Agent
- `DELETE /agents`: æ‰¹é‡åˆ é™¤Agent

**å‚è€ƒ**: `app/api/v1/system_manage/users.py`

---

### æ­¥éª¤5: åç«¯è·¯ç”±æ³¨å†Œ

**æ–‡ä»¶**: `app/api/v1/system_manage/__init__.py`

**æ“ä½œ**: å°†Agentè·¯ç”±æ³¨å†Œåˆ°system_manageæ¨¡å—

---

### æ­¥éª¤6: å‰ç«¯Agent APIæ¥å£å®šä¹‰

**æ–‡ä»¶**: `web/src/service/api/agent.ts`

**éœ€è¦å®šä¹‰çš„æ¥å£**:
- `fetchGetAgentList`: è·å–Agentåˆ—è¡¨
- `fetchGetAgentDetail`: è·å–Agentè¯¦æƒ…
- `fetchCreateAgent`: åˆ›å»ºAgent
- `fetchUpdateAgent`: æ›´æ–°Agent
- `fetchDeleteAgent`: åˆ é™¤Agent

**å‚è€ƒ**: `web/src/service/api/system-manage.ts`

---

### æ­¥éª¤7: å‰ç«¯Agentç±»å‹å®šä¹‰

**æ–‡ä»¶**: `web/src/typings/api.d.ts`

**éœ€è¦å®šä¹‰çš„ç±»å‹**:
- `Api.Agent.SearchParams`
- `Api.Agent.List`
- `Api.Agent.Item`
- `Api.Agent.Create`
- `Api.Agent.Update`

---

### æ­¥éª¤8: å‰ç«¯Agentåˆ—è¡¨é¡µé¢

**æ–‡ä»¶**: `web/src/views/agent/index.vue`

**åŠŸèƒ½**:
- Agentåˆ—è¡¨å±•ç¤º
- æœç´¢å’Œåˆ†é¡µ
- åŸºç¡€çš„å¢åˆ æ”¹æŸ¥æ“ä½œ

**å‚è€ƒ**: `web/src/views/manage/user/index.vue`

---

## ä»£ç å®ç°è§„èŒƒ

### åç«¯è§„èŒƒ

1. **æ¨¡å‹å‘½å**: ä½¿ç”¨PascalCaseï¼Œå¦‚ `Agent`
2. **Schemaå‘½å**: ä½¿ç”¨PascalCase + åç¼€ï¼Œå¦‚ `AgentCreate`, `AgentUpdate`
3. **Controllerå‘½å**: ä½¿ç”¨PascalCase + Controllerï¼Œå¦‚ `AgentController`
4. **APIè·¯å¾„**: ä½¿ç”¨å¤æ•°å½¢å¼ï¼Œå¦‚ `/agents`
5. **å“åº”æ ¼å¼**: ç»Ÿä¸€ä½¿ç”¨ `Success` æˆ– `SuccessExtra`

### å‰ç«¯è§„èŒƒ

1. **APIå‡½æ•°å‘½å**: ä½¿ç”¨ `fetch` å‰ç¼€ï¼Œå¦‚ `fetchGetAgentList`
2. **ç±»å‹å‘½å**: ä½¿ç”¨å‘½åç©ºé—´ï¼Œå¦‚ `Api.Agent.Item`
3. **ç»„ä»¶å‘½å**: ä½¿ç”¨PascalCaseï¼Œå¦‚ `AgentList`
4. **è·¯ç”±è·¯å¾„**: ä½¿ç”¨å°å†™ï¼Œå¦‚ `/agent`

---

## æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“è¿ç§»**: ä¿®æ”¹æ¨¡å‹åéœ€è¦åˆ›å»ºè¿ç§»æ–‡ä»¶
2. **æƒé™æ§åˆ¶**: æ ¹æ®éœ€æ±‚æ·»åŠ æƒé™ä¾èµ–
3. **æ—¥å¿—è®°å½•**: å…³é”®æ“ä½œéœ€è¦è®°å½•æ—¥å¿—
4. **é”™è¯¯å¤„ç†**: ç»Ÿä¸€ä½¿ç”¨å¼‚å¸¸æˆ–å“åº”å¯¹è±¡
5. **å›½é™…åŒ–**: å‰ç«¯æ–‡æœ¬ä½¿ç”¨ `$t()` å‡½æ•°

---

## ä¸‹ä¸€æ­¥è®¡åˆ’

å®Œæˆç¬¬ä¸€é˜¶æ®µåï¼Œå°†è¿›å…¥ç¬¬äºŒé˜¶æ®µï¼šå…³é”®ä¸šåŠ¡åœºæ™¯é…ç½®

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-11-06

